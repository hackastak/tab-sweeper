chrome.runtime.onInstalled.addListener(()=>{chrome.storage.sync.set({permanentTabs:[]},()=>{console.log("Permanent tabs initialized.")})});chrome.action.onClicked.addListener(()=>{o()});chrome.commands.onCommand.addListener(e=>{e==="close-non-permanent-tabs"&&o()});function o(){chrome.tabs.query({currentWindow:!0},e=>{chrome.storage.sync.get("permanentTabs",({permanentTabs:r})=>{e.forEach(n=>{r.includes(n.url)||chrome.tabs.remove(n.id)})})})}
